### æ•´ç†ä¸€ä¸‹äºŒè¿›åˆ¶ã€è®¡ç®—æœºç¼–ç ã€ä½è¿ç®—ç›¸å…³çŸ¥è¯†ï¼Œæ‹’ç»å«ç³Šä¸æ¸…

> ä¸»è¦æ¶‰åŠä¸‰ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ byteã€intã€char

#### ä»¥16è¿›åˆ¶è¡¨ç¤ºæŸ¥çœ‹äºŒè¿›åˆ¶æ–‡ä»¶

```bash
xxd file
```

#### åç ã€è¡¥ç ï¼š
[https://www.cnblogs.com/zhangziqiu/archive/2011/03/30/ComputerCode.html](https://www.cnblogs.com/zhangziqiu/archive/2011/03/30/ComputerCode.html)

##### ä¸Šé¢è™½ç„¶è§£é‡Šäº† åç ï¼Œè¡¥ç ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€äº›é—®é¢˜æ²¡æœ‰è§£é‡Šæ¸…æ¥šï¼šä¸ºä»€ä¹ˆè´Ÿæ•°çš„è¡¥ç æ˜¯åç +1ï¼Œä¸ºä»€ä¹ˆæ­£æ•°çš„è¡¥ç è¿˜æ˜¯æœ¬èº«ï¼Œ-128çš„è¡¥ç ä¸ºä»€ä¹ˆæ˜¯10000000ç­‰ç­‰ï¼Œè¯·çœ‹ä¸‹é¢ğŸ‘‡
[https://www.cnblogs.com/esmusssein/p/11182321.html](https://www.cnblogs.com/esmusssein/p/11182321.html)

#### å­—ç¬¦ç¼–ç ï¼š
[https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/](https://www.ibm.com/developerworks/cn/java/j-lo-chinesecoding/)

> Java åˆ¤æ–­æœ¬åœ°ä¸»æœºå­—èŠ‚åºå·¥å…·ï¼šByteOrder.nativeOrder();
> å¤§ç«¯å°ç«¯åœ¨ä¸€å°æœºå™¨ä¸Šæ²¡æ„ŸçŸ¥ï¼Œå› ä¸ºé«˜ä½åœ°ä½æ˜¯ç¡®å®šçš„ï¼Œåªä¸è¿‡åœ¨æœ‰çš„æœºå™¨ä¸Šå†…å­˜çš„é«˜åœ°å€å¯¹åº”é«˜ä½å«â€œå°ç«¯å­—èŠ‚åºâ€ åƒx86æ¶æ„ï¼Œè€Œæœ‰çš„æ˜¯å†…å­˜çš„é«˜åœ°å€å¯¹åº”ä½ä½å«â€œå¤§ç«¯å­—èŠ‚åºâ€ã€‚
#### Unicode ç¼–ç æŸ¥è¯¢å·¥å…·ï¼š
[https://www.qqxiuzi.cn/bianma/Unicode-UTF.php](https://www.qqxiuzi.cn/bianma/Unicode-UTF.php)

#### Javaå†…ç æ˜¯utf-16å—ï¼Ÿ
[https://blog.csdn.net/u014631304/article/details/77509380](https://blog.csdn.net/u014631304/article/details/77509380)

#### å…³äºUnicodeæ›´å¤šç†è§£ï¼š
[https://www.jianshu.com/p/ad4bff4d9fa3](https://www.jianshu.com/p/ad4bff4d9fa3)

#### Javaç¼–ç æ‰©å±•çŸ¥è¯†ï¼š
[https://www.jianshu.com/p/1b00ca07b003](https://www.jianshu.com/p/1b00ca07b003)

#### ç†è§£byteè´Ÿæ•°ï¼š
[https://blog.csdn.net/csdn_ds/article/details/79106006](https://blog.csdn.net/csdn_ds/article/details/79106006)

#### & 0xff è·å–çœŸå€¼åŸç†ï¼š
[https://blog.csdn.net/i6223671/article/details/88924481](https://blog.csdn.net/i6223671/article/details/88924481)

#### å¸¸ç”¨å·¥å…·ä»£ç ï¼š
1. byte è½¬ äºŒè¿›åˆ¶è¡¨ç¤º
```java
    /**
     * byte è½¬ äºŒè¿›åˆ¶è¡¨ç¤º
     * @param b
     * @return
     */
    public static String byteToBit(byte b) {
        return ""
                + (byte) ((b >> 7) & 0x1) + (byte) ((b >> 6) & 0x1)
                + (byte) ((b >> 5) & 0x1) + (byte) ((b >> 4) & 0x1)
                + (byte) ((b >> 3) & 0x1) + (byte) ((b >> 2) & 0x1)
                + (byte) ((b >> 1) & 0x1) + (byte) ((b >> 0) & 0x1);
    }
```

2. è·å–byteæŒ‡å®šä½çš„å€¼
```java
    /**
     * è·å–byteæŒ‡å®šä½çš„å€¼
     * @param b
     * @param i (i>=1)
     * @return
     */
    public static byte getBitArray(byte b,int i) {
        return (byte) ((b >> (8-i)) & 0x1);
    }
```

3. å­—èŠ‚æ•°ç»„è½¬16è¿›åˆ¶
```java
    /**
     * å­—èŠ‚æ•°ç»„è½¬16è¿›åˆ¶
     * @param bytes éœ€è¦è½¬æ¢çš„byteæ•°ç»„
     * @return  è½¬æ¢åçš„Hexå­—ç¬¦ä¸²
     */
    public static String bytesToHex(byte[] bytes) {
        StringBuffer sb = new StringBuffer();
        for(int i = 0; i < bytes.length; i++) {
            String hex = Integer.toHexString(bytes[i] & 0xFF);
            if(hex.length() < 2){
                sb.append(0);
            }
            sb.append(hex);
        }
        return sb.toString();
    }
```

4. char è½¬ byteæ•°ç»„(JVMå¤§ç«¯è½¬åŒ–çš„ç»“æœï¼ŒéçœŸå®å†…å­˜å­˜æ”¾é¡ºåº)
```java
    /**
     * char è½¬ byteæ•°ç»„
     * @param c
     * @return
     */
    public static byte[] charToByte(char c) {
        byte[] b = new byte[2];
        b[0] = (byte) ((c & 0xFF00) >> 8);
        b[1] = (byte) (c & 0xFF);
        return b;
    }
```
5. 16è¿›åˆ¶ è½¬ å­—èŠ‚æ•°ç»„
```java
 	/**
     * 16è¿›åˆ¶ è½¬ å­—èŠ‚æ•°ç»„
     * @param hexString
     * @return
     */
    public static byte[] hexString2Bytes(String hexString) {
        BiFunction<Byte, Byte, Byte> uniteBytes = (src0, src1) -> {
            char b0 = (char) Byte.decode("0x" + new String(new byte[] {src0})).byteValue();
            b0 = (char) (b0 << 4);
            char b1 = (char) Byte.decode("0x" + new String(new byte[] {src1})).byteValue();
            return (byte) (b0 ^ b1);
        };
        int size = hexString.length();
        byte[] ret = new byte[size / 2];
        byte[] tmp = hexString.getBytes();
        for (int i = 0; i < size / 2; i++) {
            ret[i] = uniteBytes.apply(tmp[i * 2], tmp[i * 2 + 1]);
        }
        return ret;
    }
```

6. byteæ•°ç»„ è½¬ int
```java
    /**
     * byteæ•°ç»„ è½¬ int
     * @param bytes
     * @return
     */
    public static int bytes2Int(byte[] bytes) {
        int result = 0;
        //å°†æ¯ä¸ªbyteä¾æ¬¡æ¬è¿åˆ°intç›¸åº”çš„ä½ç½®
        result = bytes[0] & 0xff;
        result = result << 8 | bytes[1] & 0xff;
        result = result << 8 | bytes[2] & 0xff;
        result = result << 8 | bytes[3] & 0xff;
        return result;
    }
```

7. int è½¬ byteæ•°ç»„
```java
    /**
     * int è½¬ byteæ•°ç»„
     * @param num
     * @return
     */
    public static byte[] int2Bytes(int num) {
        byte[] bytes = new byte[4];
        //é€šè¿‡ç§»ä½è¿ç®—ï¼Œæˆªå–ä½8ä½çš„æ–¹å¼ï¼Œå°†intä¿å­˜åˆ°byteæ•°ç»„
        bytes[0] = (byte) (num >>> 24);
        bytes[1] = (byte) (num >>> 16);
        bytes[2] = (byte) (num >>> 8);
        bytes[3] = (byte) num;
        return bytes;
    }
```

8.è·å–Stringå†…å­˜ä¸­å¯¹åº”çš„ UTF-16 ç¼–ç çš„byteæ•°ç»„ (JVMå¤§ç«¯è½¬åŒ–çš„ç»“æœï¼ŒéçœŸå®å†…å­˜å­˜æ”¾é¡ºåº)
```java
    /**
     * è·å–Stringå†…å­˜ä¸­å¯¹åº”çš„ UTF-16 ç¼–ç çš„byteæ•°ç»„ 
     * @param str
     * @return
     */
    public static byte[] string2bytes(String str) {
        ByteBuffer heapByteBuffer = ByteBuffer.allocate (str.length() * 2);
        for (char c : str.toCharArray()) {
            heapByteBuffer.putChar(c);
        }
        heapByteBuffer.flip();

        int len = heapByteBuffer.limit() - heapByteBuffer.position();
        byte[] bytes = new byte[len];
        heapByteBuffer.get(bytes);
        return bytes;
    }
```
9.é€šè¿‡UnsafeæŸ¥çœ‹å­—ç¬¦åœ¨å†…å­˜ä¸­çš„å®é™…é¡ºåº(éJVMä¼˜åŒ–è¿‡çš„,æˆ‘è®¤ä¸ºè¿™æ‰æ˜¯å†…å­˜çœŸå®å­˜æ”¾çš„é¡ºåºï¼Œå–å†³äºå…·ä½“çš„CPUæ¶æ„)
```java
    @SuppressWarnings("restriction")
    static private sun.misc.Unsafe getUnsafe() throws IllegalArgumentException, IllegalAccessException {
        Class<?> cls = sun.misc.Unsafe.class;
        Field[] fields = cls.getDeclaredFields();
        for (Field f : fields) {
            if ("theUnsafe".equals(f.getName())) {
                f.setAccessible(true);
                return (sun.misc.Unsafe) f.get(null);
            }
        }
        throw new IllegalAccessException("no declared field: theUnsafe");
    }

    /**
     * æŸ¥çœ‹å­—ç¬¦åœ¨å†…å­˜ä¸­çœŸå®çš„é¡ºåºï¼ŒéJVMä¼˜åŒ–çš„ï¼Œå–å†³äºCPUæ¶æ„
     * @param ch
     * @return
     * @throws IllegalAccessException
     */
    public static byte[] char2bytesNative(char ch) throws IllegalAccessException {
        byte[] bytes = new byte[2];
        Unsafe unsafe = getUnsafe();
        long address = unsafe.allocateMemory(2);
        unsafe.putChar(address, ch);
        byte b = unsafe.getByte(address);
        bytes[0] = b;
        b = unsafe.getByte(address + 1);
        bytes[1] = b;
        return bytes;
    }

    public static void main(String[] args) throws Throwable {
       	System.out.println(bytes2HexString(charToByte('å›½')));
      	System.out.println(bytes2HexString(char2bytesNative('å›½')));
    }

    /**
     * è¿˜æœ‰ä¸€ç§æ›´ç›´æ¥çš„æ–¹æ³•
     * @param ch
     * @return
     * @throws IllegalAccessException
     */
    public static byte[] char2bytesNative2(char ch) throws IllegalAccessException {
        Unsafe unsafe = getUnsafe();
        char[] charArr = new char[1];
        charArr[0] = ch;
        byte b = unsafe.getByte(charArr, (long) (unsafe.arrayBaseOffset(charArr.getClass())));
        
        byte[] bytes = new byte[2];
        bytes[0] = b;
        b = unsafe.getByte(charArr, (long) (unsafe.arrayBaseOffset(charArr.getClass()) + 1));
        bytes[1] = b;
        return bytes;
    }
```